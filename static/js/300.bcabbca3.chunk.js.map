{"version":3,"file":"static/js/300.bcabbca3.chunk.js","mappings":"qXAEO,SAASA,EAAWC,GAC1B,IAAIC,EAAmB,KAOvB,OANiB,WAIhB,OAHc,MAAVA,IACHA,EAASD,KAEHC,GCJF,I,EAAMC,EAAb,WAIC,WAAmBC,IAAiC,eAHpD,KAAQC,QAAiB,GAIxBC,KAAKF,iBAAmBA,EAL1B,oCAQC,SAAaG,GAA2C,WACjDC,EAAiBF,KAAKD,QAAQI,OAQpC,OAFAH,KAAKD,QDCA,SAA0CK,EAAaC,GAC7D,IAAMC,EAAM,IAAIC,IACVC,EAAa,SAACC,GAAD,OAAaH,EAAII,IAAID,IACxCL,EAAOO,QAAQH,GACfH,EAAOM,QAAQH,GAEf,IAAMZ,EAAc,GAEpB,OADAU,EAAIK,SAAQ,SAACC,GAAD,OAAShB,EAAOiB,KAAKD,MAC1BhB,ECTSkB,CAAMd,KAAKD,QAAQgB,QAJZ,SAACC,GAAD,OACrB,EAAKlB,iBAAiBkB,MACpBA,EAAKC,UAAYD,EAAKC,SAAShB,OAEuB,CAACA,IAEhC,IAAnBC,GAAwBF,KAAKD,QAAQI,OAAS,IAjBvD,mBAoBC,SAAae,GACZ,IDTyBC,EAAYV,ECS/BP,EAAiBF,KAAKD,QAAQI,OAOpC,OALAH,KAAKD,SDXoBoB,ECYxBnB,KAAKD,QAAQgB,OAAOf,KAAKF,kBDZWW,ECapCS,EDZKC,EAAMJ,QAAO,SAACK,GAAD,OAAOA,IAAMX,MCezBP,EAAiB,GAA6B,IAAxBF,KAAKD,QAAQI,SA5B5C,mBA+BC,WACCH,KAAKD,QAAU,OAhCjB,KCAasB,EAAb,WAIC,WAAmBC,IAA0B,eAC5CtB,KAAKsB,OAASA,EACdtB,KAAKS,KAAO,GACZT,KAAKuB,8BAPP,0DAUC,WAAsC,WACrCC,OAAOC,KAAKzB,KAAKsB,OAAOI,kBAAkBf,SAAQ,SAACgB,GAClDH,OAAOI,eAAe,EAAKnB,KAAMkB,EAAU,CAC1CE,cAAc,EACdC,YAAY,EACZC,IAH0C,WAQzC,OAHAC,QAAQC,KAARD,mCAAAA,OACmCL,EADnCK,4BAGO,aApBZ,8BA0BC,SAAwBE,GAAqD,WAC5E,GAAIA,EAAc,CACjB,IAAMC,EAAuC,GAC7CX,OAAOC,KAAKzB,KAAKsB,OAAOI,kBAAkBf,SAAQ,SAACgB,GAClD,IAAMS,EAAa,EAAKd,OAAOI,iBAAiBC,GAC9B,MAAdS,IACHD,EAAcR,GAAY,CACzBU,MAAOD,EAAWF,EAAc,EAAKZ,OAAOgB,cAC5CT,cAAc,EACdC,YAAY,OAIfN,OAAOe,iBAAiBvC,KAAKS,KAAM0B,MAvCtC,qBA2CC,WACC,OAAO,IA5CT,uBA+CC,WACC,OAAOnC,KAAKS,OAhDd,wBAmDC,SAAkB+B,EAA0BC,GAC3C,OAAOA,IAAWD,EAAQE,gBApD5B,qBAuDC,gBAvDD,K,UCJaC,EAAO,kBACPC,EAAM,iBACNC,EAAO,kBACPC,EAAO,kBCHb,SAASC,EACfb,EACAc,EACAC,GAEA,IAAMrD,EAASoD,EAAWE,QACzB,SAACC,EAAaC,GAAd,OAA4BD,GAAejB,EAAamB,QAAQD,KAChE,IAGD,OAAiB,MAAVxD,EAAiBA,EAASqD,ECK3B,IAAMK,GAAiB,eAG5BC,EAAmB,CACnB7B,iBAAkB,CACjB8B,MAAO,SAACtB,GAAD,OACNuB,MAAMC,UAAUC,MAAMC,KAAK1B,EAAasB,QACzCrC,MAAO,SAACe,GAAD,OACNA,EAAaf,OACde,aAAc,SAACA,GAAD,OAA8CA,IAE7DI,aAAc,CAAC,YAXa,SAa5BiB,EAAmB,CACnB7B,iBAAkB,CACjBmC,KAAM,SAAC3B,EAA4BI,GAA7B,OACLS,EAAwBb,EAAcI,EAAc,KACrDJ,aAAc,SAACA,GAAD,OAA8CA,IAE7DI,aAAc,CAAC,OAAQ,gBAnBK,SAqB5BiB,EAAkB,CAClB7B,iBAAkB,CACjBoC,KAAM,SAAC5B,EAA4BI,GAA7B,OACLS,EAAwBb,EAAcI,EAAc,IAAIyB,MAAM,OAC/D7B,aAAc,SAACA,GAAD,OAA8CA,IAE7DI,aAAc,CAAC,MAAO,oBA3BM,SA6B5BiB,EAAmB,CACnB7B,iBAAkB,CACjBsC,KAAM,SAAC9B,EAA4BI,GAA7B,OACLS,EAAwBb,EAAcI,EAAc,KACrDJ,aAAc,SAACA,GAAD,OAA8CA,IAE7DI,aAAc,CAAC,OAAQ,gBAnCK,GCCvB,SAAS2B,EACf/B,GAEA,IAAKA,EACJ,OAAO,KAGR,IAAMgC,EAAoBT,MAAMC,UAAUC,MAAMC,KAAK1B,EAAaiC,OAAS,IAC3E,OACC3C,OAAOC,KAAK6B,GAAmBvC,QAAO,SAACqD,GACtC,IAAMC,EAAaf,EAAkBc,GACrC,SAAe,OAAVC,QAAU,IAAVA,OAAAA,EAAAA,EAAY/B,eAGV+B,EAAW/B,aAAagC,MAC9B,SAACC,GAAD,OAAOL,EAAkBM,QAAQD,IAAM,QAEtC,IAAM,KCxBJ,IAAME,EAAuB/E,GAAQ,iBAC3C,WAAWgF,KAAKC,UAAUC,cAEdC,EAAsBnF,GAAQ,kBAAMoF,QAAQC,OAAOC,WCZnDC,EAAb,WAOC,WAAmBC,EAAcC,IAAc,eAK9C,IAJA,IAAQhF,EAAW+E,EAAX/E,OAGFiF,EAAU,GACPhE,EAAI,EAAGA,EAAIjB,EAAQiB,IAC3BgE,EAAQvE,KAAKO,GAEdgE,EAAQC,MAAK,SAACC,EAAGC,GAAJ,OAAWL,EAAII,GAAiBJ,EAAGK,IAAiB,EAAI,KAQrE,IALA,IAGIC,EACAC,EAJEC,EAAM,GACNC,EAAM,GACNC,EAAK,GAGFxE,EAAI,EAAGA,EAAIjB,EAAS,EAAGiB,IAC/BoE,EAAKN,EAAI9D,EAAI,GAAiB8D,EAAG9D,GACjCqE,EAAKN,EAAI/D,EAAI,GAAiB+D,EAAG/D,GACjCuE,EAAI9E,KAAK2E,GACTE,EAAI7E,KAAK4E,GACTG,EAAG/E,KAAK4E,EAAKD,GAKd,IADA,IAAMK,EAAM,CAACD,EAAG,IACPxE,EAAI,EAAGA,EAAIuE,EAAIxF,OAAS,EAAGiB,IAAK,CACxC,IAAM0E,EAAKF,EAAGxE,GACR2E,EAAQH,EAAGxE,EAAI,GACrB,GAAI0E,EAAKC,GAAS,EACjBF,EAAIhF,KAAK,OACH,CACN2E,EAAKG,EAAIvE,GACT,IAAM4E,EAASL,EAAIvE,EAAI,GACjB6E,EAAST,EAAKQ,EACpBH,EAAIhF,KACH,EAAKoF,IAAYA,EAASD,GAAUF,GAAMG,EAAST,GAAMO,KAI5DF,EAAIhF,KAAK+E,EAAGA,EAAGzF,OAAS,IAMxB,IAHA,IAEI+F,EAFEC,EAAM,GACNC,EAAM,GAEHhF,EAAI,EAAGA,EAAIyE,EAAI1F,OAAS,EAAGiB,IAAK,CACxC8E,EAAIN,EAAGxE,GACP,IAAMiF,EAAKR,EAAIzE,GACTkF,EAAQ,EAAKX,EAAIvE,GACjB6E,EAASI,EAAMR,EAAIzE,EAAI,GAAgB8E,EAAIA,EACjDC,EAAItF,MAAMqF,EAAIG,EAAKJ,GAAUK,GAC7BF,EAAIvF,KAAKoF,EAASK,EAAQA,GAG3BtG,KAAKkF,GAAKA,EACVlF,KAAKmF,GAAKA,EACVnF,KAAK6F,IAAMA,EACX7F,KAAKmG,IAAMA,EACXnG,KAAKoG,IAAMA,EAlEb,0CAqEC,SAAmBG,GAClB,IAAQrB,EAA0BlF,KAA1BkF,GAAIC,EAAsBnF,KAAtBmF,GAAIU,EAAkB7F,KAAlB6F,IAAKM,EAAanG,KAAbmG,IAAKC,EAAQpG,KAARoG,IAGtBhF,EAAI8D,EAAG/E,OAAS,EACpB,GAAIoG,IAAMrB,EAAG9D,GACZ,OAAO+D,EAAG/D,GAOX,IAHA,IAEIoF,EAFAC,EAAM,EACNC,EAAON,EAAIjG,OAAS,EAEjBsG,GAAOC,GAAM,CAEnB,IAAMC,EAAQzB,EADdsB,EAAMI,KAAKC,MAAM,IAAOJ,EAAMC,KAE9B,GAAIC,EAAQJ,EACXE,EAAMD,EAAM,MACN,MAAIG,EAAQJ,GAGlB,OAAOpB,EAAGqB,GAFVE,EAAOF,EAAM,GAQf,IAAMM,EAAOP,EAAIrB,EAHjB9D,EAAIwF,KAAKG,IAAI,EAAGL,IAIVM,EAASF,EAAOA,EACtB,OAAO3B,EAAG/D,GAAKyE,EAAIzE,GAAK0F,EAAOX,EAAI/E,GAAK4F,EAASZ,EAAIhF,GAAK0F,EAAOE,MAlGnE,KCOO,SAASC,EAAoBjG,GACnC,IAAMkG,EAHc,IAGTlG,EAAKmG,SAA4BnG,EAAOA,EAAKoG,cAExD,IAAKF,EACJ,OAAO,KAGR,MAAsBA,EAAoBG,wBAAlCC,EAAR,EAAQA,IACR,MAAO,CAAEf,EADT,EAAagB,KACKC,EAAGF,GAGf,SAASG,EAAqBC,GACpC,MAAO,CACNnB,EAAGmB,EAAEC,QACLH,EAAGE,EAAEE,SA4BA,SAASC,EACfC,EACAC,EACAC,EACAC,EACAC,GAIA,IAAMC,EAjCP,SAAqBnH,G,IAGFoH,EAFlB,MACmB,QAAlBpH,EAAKqH,WACJ5D,OAAwC,QAAxB2D,EAAAA,SAASE,uBAAe,IAAxBF,OAAAA,EAAAA,EAA0BnH,SAASD,KA8BrCuH,CAAYR,GAEtBS,EAAkCvB,EADhBkB,EAAUL,EAAaC,GAIzCU,EAAwB,CAC7BlC,EAAGyB,EAAazB,EAAIiC,EAAgCjC,EACpDiB,EAAGQ,EAAaR,EAAIgB,EAAgChB,GAEhCkB,EAA4CZ,EAAzDa,YAAwCC,EAAiBd,EAA/Be,aAC1BC,EAAqBb,EAArBa,QAASC,EAAYd,EAAZc,QACjB,EArCD,SACCZ,EACAJ,EACAW,EACAE,GAEA,IAAII,EAAmBb,EAAUJ,EAAYkB,MAAQP,EACjDQ,EAAoBf,EAAUJ,EAAYoB,OAASP,EAOvD,OAJI/D,KAAcsD,IACjBe,GAAqBnE,OAAOqE,iBAC5BJ,GAAoBjE,OAAOqE,kBAErB,CAAEJ,iBAAAA,EAAkBE,kBAAAA,GAuBqBG,CAC/ClB,EACAJ,EACAW,EACAE,GAJOI,EAAR,EAAQA,iBAAkBE,EAA1B,EAA0BA,kBA8ClBI,EAAqBpB,EAArBoB,QAASC,EAAYrB,EAAZqB,QAEXC,EAA8B,IAAZD,GAAiBA,EACzC,MAAO,CACNhD,EAHmC,IAAZ+C,GAAiBA,EAGnBA,EAnBA,IAAIrE,EACxB,CAAC,EAAG,GAAK,GACT,CAECwD,EAAsBlC,EAErBkC,EAAsBlC,EAAImC,EAAeM,EAE1CP,EAAsBlC,EAAIyC,EAAmBN,IAG3Be,YAAYX,GAShCtB,EAAGgC,EAAkBD,EA5CG,WACxB,IAWI/B,EAXiB,IAAIvC,EACxB,CAAC,EAAG,GAAK,GACT,CAECwD,EAAsBjB,EAErBiB,EAAsBjB,EAAIoB,EAAgBM,EAE3CT,EAAsBjB,EAAI0B,EAAoBN,IAG3Ba,YAAYV,GAMjC,OAJIlE,KAAcsD,IAEjBX,IAAMzC,OAAOqE,iBAAmB,GAAKF,GAE/B1B,EA0BwBkC,ICtH1B,IAAMC,EAAb,WAKC,WACCC,EACAC,IACC,eAPF,KAAOC,cAAiC,KAQvC9J,KAAK4J,cAAgBA,EACrB5J,KAAK+J,YAAcF,EAVrB,mCAaC,WACC,OAAI7J,KAAK4J,cACD5J,KAAK4J,cACgB,qBAAX7E,OACVA,YADD,IAhBT,oBAsBC,W,IACKiF,EAAJ,OAAsB,QAAlB,EAAAhK,KAAK4J,qBAAa,IAAlB,WAAoBxB,UAChBpI,KAAK4J,cAAcxB,SAChBpI,KAAK+E,OACR/E,KAAK+E,OAAOqD,cAEnB,IA5BH,uBAgCC,W,IACQ4B,EAAP,OAAuB,QAAhB,EAAAhK,KAAK+J,mBAAW,IAAhB,WAAkBE,cAAejK,KAAK+E,WAjC/C,KCFA,kB,+aA4BO,IC5BHmF,ED4BSC,EAAb,WA8BC,WACCC,EACAR,EACAC,GACC,2BAvBF,KAAQQ,mBAA2C,IAAIC,IACvD,KAAQC,yBAA6C,IAAID,IACzD,KAAQE,YAAoC,IAAIF,IAChD,KAAQG,kBAAsC,IAAIH,IAElD,KAAQI,mBAAsC,KAC9C,KAAQC,cAA0B,GAClC,KAAQC,mBAA+B,GACvC,KAAQC,oBAA+C,KACvD,KAAQC,oBAAyC,KACjD,KAAQC,sBAAwC,KAChD,KAAQC,eAAgB,EACxB,KAAQC,sBAAuC,KAC/C,KAAQC,oBAAqC,KAC7C,KAAQC,kBAAqC,KAE7C,KAAQC,iBAAmC,KAC3C,KAAQC,WAA4B,KA+OpC,KAAQC,sBAAwB,SAACC,GAChC,IAAMC,EAAS,EAAKhB,YAAYzI,IAAIwJ,GACpC,OAAOC,GAAWvE,EAAoBuE,IAA2B,MAqBlE,KAAQC,kBAAoB,WACtB,EAAKC,yBAIV,EAAKC,QAAQC,UACT,EAAKd,qBACR,EAAKe,SAASC,aAAa,EAAKhB,qBAEjC,EAAKA,oBAAsB,KAC3B,EAAKD,oBAAsB,OAG5B,KAAQ/K,iBAAmB,SAACkB,GAE3B,OAAO8D,QACN9D,GACC,EAAKoH,UACL,EAAKA,SAAS2D,MACd,EAAK3D,SAAS2D,KAAK9K,SAASD,KAI/B,KAAQgL,iCAAmC,WAC1C,IAAMhL,EAAO,EAAK+J,sBACN,MAAR/J,GAAgB,EAAKlB,iBAAiBkB,KAItC,EAAKiL,8BAAgC,EAAKzJ,QAAQ0J,cACrD,EAAKP,QAAQC,UAEd,EAAKO,gBAsDN,KAAQC,cAAgB,SAACjB,GAEH,OAApB,EAAKE,YAC4B,qBAA1BgB,wBAEP,EAAKhB,WAAagB,uBAAsB,WACnC,EAAK7J,QAAQ0J,cAChB,EAAKP,QAAQW,MAAMnB,GAAqB,GAAI,CAC3CnD,aAAc,EAAKoD,mBAIrB,EAAKC,WAAa,UAKrB,KAAQc,YAAc,WAEA,OAApB,EAAKd,YAC2B,qBAAzBkB,uBAEPA,qBAAqB,EAAKlB,YAC1B,EAAKA,WAAa,OAIpB,KAAOmB,0BAA4B,WAClC,EAAKP,6BACL,EAAKvB,mBAAqB,IAc3B,KAAO+B,mBAAqB,SAAC/E,GAC5B,IAAIA,EAAEgF,iBAAN,CAIA,IAAQhC,EAAuB,EAAvBA,mBACR,EAAKA,mBAAqB,KAE1B,IAAM1C,EAAeP,EAAqBC,GAGtC,EAAKlF,QAAQ0J,eAChB,EAAKP,QAAQC,UACb,EAAKO,eAIN,EAAKR,QAAQgB,UAAUjC,GAAsB,GAAI,CAChDkC,eAAe,EACftB,sBAAuB,EAAKA,sBAC5BtD,aAAAA,IAGD,IAAQ9F,EAAiBwF,EAAjBxF,aACF2K,EAAa5I,EAAoB/B,GAEvC,GAAI,EAAKM,QAAQ0J,aAAc,CAC9B,GAAIhK,GAAqD,oBAA9BA,EAAa4K,aAA6B,CAIpE,IAAMvB,EAAmB,EAAK/I,QAAQE,cAChCoF,EAAa,EAAK0C,YAAYzI,IAAIwJ,GAClCxD,EAAc,EAAKsC,mBAAmBtI,IAAIwJ,IAAazD,EAE7D,GAAIC,EAAa,CAChB,MACC,EAAKgF,qCAGAC,EAAoBnF,EACzBC,EACAC,EACAC,EALmB,CAAEc,QAFtB,EAAQA,QAEuBC,QAF/B,EAAiBA,SAGG,CAAEO,QAHtB,EAA0BA,QAGKC,QAH/B,EAAmCA,UAYnCrH,EAAa4K,aACZ/E,EACAiF,EAAkBzG,EAClByG,EAAkBxF,IAKrB,IAEa,OAAZtF,QAAY,IAAZA,GAAAA,EAAc+K,QAAQ,mBAAoB,IACzC,MAAOC,IAMT,EAAKC,yBAAyBzF,EAAE0F,QAGC,EAAKL,qCAA9BM,qBAmBP,EAAK1B,QAAQ2B,oBAZbC,YAAW,kBAAM,EAAK5B,QAAQ2B,sBAAqB,QAc9C,GAAIT,EAEV,EAAKW,oBAAoBX,OACnB,IACN3K,IACCA,EAAaiC,QACbuD,EAAG0F,SAAW1F,EAAG0F,OAAmBK,eACnC/F,EAAG0F,OAAmBK,aAAa,cAKrC,OAGA/F,EAAEgG,oBAIJ,KAAOC,wBAA0B,WAC5B,EAAK1B,8BAAgC,EAAKzJ,QAAQ0J,cAIrD,EAAKP,QAAQC,UAEd,EAAKO,eAGN,KAAOyB,0BAA4B,SAAClG,G,IAIlCsC,GAHD,EAAKY,mBAAqB,GAEtB,EAAKc,0BACgB,QAAxB,IAAKb,2BAAmB,IAAxB,KAA0BgD,iBAAiBnG,EAAExF,eAI9C,GADqB,EAAK4L,kBAAkBC,MAAMrG,EAAE0F,UAC/B,EAAK5K,QAAQ0J,aAAlC,CAIA,IAAQhK,EAAiBwF,EAAjBxF,aACF2K,EAAa5I,EAAoB/B,GAEnC2K,GAEH,EAAKW,oBAAoBX,EAAY3K,KAQvC,KAAO8L,mBAAqB,SAACtG,GAC5B,IAAQkD,EAAuB,EAAvBA,oBACR,EAAKA,mBAAqB,GAErB,EAAKpI,QAAQ0J,gBAKlB,EAAKlB,cAAgBtD,EAAEuG,OAKnBrD,EAAmBzK,OAAS,GAC/B,EAAKwL,QAAQW,MAAM1B,EAAoB,CACtC5C,aAAcP,EAAqBC,KAIrBkD,EAAmBtG,MAAK,SAAC4J,GAAD,OACvC,EAAK1L,QAAQ2L,gBAAgBD,QAK7BxG,EAAEgG,iBACEhG,EAAExF,eACLwF,EAAExF,aAAakM,WAAa,EAAKC,2BAKpC,KAAOC,yBAA2B,SAAC5G,G,IAIjCsC,GAHD,EAAKmB,kBAAoB,GAErB,EAAKO,0BACgB,QAAxB,IAAKb,2BAAmB,IAAxB,KAA0BgD,iBAAiBnG,EAAExF,gBAW/C,KAAOqM,kBAAoB,SAAC7G,GAC3B,IAAQyD,EAAsB,EAAtBA,kBAGR,GAFA,EAAKA,kBAAoB,IAEpB,EAAK3I,QAAQ0J,aAOjB,OAJAxE,EAAEgG,sBACEhG,EAAExF,eACLwF,EAAExF,aAAakM,WAAa,SAK9B,EAAKpD,cAAgBtD,EAAEuG,OACvB,EAAK7C,iBAAmB3D,EAAqBC,GAE7C,EAAK0E,cAAcjB,IAEFA,GAAqB,IAAI7G,MAAK,SAAC4J,GAAD,OAC9C,EAAK1L,QAAQ2L,gBAAgBD,OAK7BxG,EAAEgG,iBACEhG,EAAExF,eACLwF,EAAExF,aAAakM,WAAa,EAAKC,yBAExB,EAAK3C,uBAGfhE,EAAEgG,kBAEFhG,EAAEgG,iBACEhG,EAAExF,eACLwF,EAAExF,aAAakM,WAAa,UAK/B,KAAOI,0BAA4B,SAAC9G,GAC/B,EAAKgE,wBACRhE,EAAEgG,iBAGiB,EAAKI,kBAAkBW,MAAM/G,EAAE0F,UAK/C,EAAK1B,wBACR6B,YAAW,kBAAM,EAAK9B,sBAAqB,GAE5C,EAAKU,gBAGN,KAAOuC,qBAAuB,SAAChH,G,IAK7BsC,GAJD,EAAKW,cAAgB,GAEjB,EAAKe,yBACRhE,EAAEgG,iBACsB,QAAxB,IAAK7C,2BAAmB,IAAxB,KAA0BgD,iBAAiBnG,EAAExF,eACnC+B,EAAoByD,EAAExF,eAKhCwF,EAAEgG,iBAGH,EAAKI,kBAAkBa,SAOxB,KAAOC,cAAgB,SAAClH,GACvB,IAAQiD,EAAkB,EAAlBA,cACR,EAAKA,cAAgB,GAErB,EAAKgB,QAAQW,MAAM3B,EAAe,CACjC3C,aAAcP,EAAqBC,KAEpC,EAAKiE,QAAQkD,KAAK,CAAET,WAAY,EAAKC,yBAEjC,EAAK3C,uBACR,EAAKD,oBACK,EAAKjJ,QAAQ0J,cACvB,EAAKP,QAAQC,UAEd,EAAKO,eAGN,KAAO2C,kBAAoB,SAACpH,GAC3B,IAAM0F,EAAS1F,EAAE0F,OAIc,oBAApBA,EAAO2B,WAME,UAAnB3B,EAAO4B,SACY,WAAnB5B,EAAO4B,SACY,aAAnB5B,EAAO4B,SACP5B,EAAO6B,oBAORvH,EAAEgG,iBACFN,EAAO2B,cAprBP/O,KAAK6J,QAAU,IAAIF,EAAcC,EAAeC,GAChD7J,KAAK2L,QAAUvB,EAAQ8E,aACvBlP,KAAKwC,QAAU4H,EAAQ+E,aACvBnP,KAAK6L,SAAWzB,EAAQgF,cACxBpP,KAAK8N,kBAAoB,IAAIjO,EAAkBG,KAAKF,kBAvCtD,sCA6CC,W,IAMsBkK,EAGDqF,EARpB,MAAO,CACNhF,mBAAoBrK,KAAKqK,mBAAmBiF,KAC5C/E,yBAA0BvK,KAAKuK,yBAAyB+E,KACxD7E,kBAAmBzK,KAAKyK,kBAAkB6E,KAC1C9E,YAAaxK,KAAKwK,YAAY8E,KAC9B5E,oBAA2C,QAAvB,EAAA1K,KAAK0K,0BAAkB,IAAvB,WAAyBvK,SAAU,EACvDwK,cAAe3K,KAAK2K,cAAcxK,OAClCyK,mBAAoB5K,KAAK4K,mBAAmBzK,OAC5CgL,mBAAyC,QAAtB,EAAAnL,KAAKmL,yBAAiB,IAAtB,WAAwBhL,SAAU,KAtDxD,kBA2DC,WACC,OAAOH,KAAK6J,QAAQ9E,SA5DtB,oBA8DC,WACC,OAAO/E,KAAK6J,QAAQzB,WA/DtB,uBAoEC,WACC,OAAOpI,KAAK6J,QAAQI,cArEtB,mBAwEC,WACC,IAAMsF,EAAOvP,KAAKiK,YAClB,QAAauF,IAATD,EAAJ,CAIA,GAAIA,EAAKE,yBACR,MAAM,IAAIC,MAAM,oDAEjBH,EAAKE,0BAA2B,EAChCzP,KAAK2P,kBAAkBJ,MAlFzB,sBAqFC,WACC,IASCvF,EATKuF,EAAOvP,KAAKiK,iBACLuF,IAATD,IAIJA,EAAKE,0BAA2B,EAChCzP,KAAK4P,qBAAqB5P,KAAKiK,aAC/BjK,KAAKiM,6BACDjM,KAAKkL,sBACG,QAAX,EAAAlL,KAAK+E,cAAM,IAAX,KAAawH,qBAAqBvM,KAAKkL,yBA/F1C,gCAmGC,SACCK,EACAvK,EACA6I,GACc,WAId,OAHA7J,KAAKuK,yBAAyBjK,IAAIiL,EAAU1B,GAC5C7J,KAAKqK,mBAAmB/J,IAAIiL,EAAUvK,GAE/B,WACN,EAAKqJ,mBAAmBwF,OAAOtE,GAC/B,EAAKhB,yBAAyBsF,OAAOtE,MA7GxC,+BAiHC,SACCA,EACAvK,EACA6I,GACc,WACd7J,KAAKwK,YAAYlK,IAAIiL,EAAUvK,GAC/BhB,KAAKyK,kBAAkBnK,IAAIiL,EAAU1B,GAErC,IAAMiG,EAAkB,SAACpI,GAAD,OAAY,EAAKoI,gBAAgBpI,EAAG6D,IACtDuD,EAAoB,SAACpH,GAAD,OAAY,EAAKoH,kBAAkBpH,IAM7D,OAJA1G,EAAK+O,aAAa,YAAa,QAC/B/O,EAAKgP,iBAAiB,YAAaF,GACnC9O,EAAKgP,iBAAiB,cAAelB,GAE9B,WACN,EAAKtE,YAAYqF,OAAOtE,GACxB,EAAKd,kBAAkBoF,OAAOtE,GAE9BvK,EAAKiP,oBAAoB,YAAaH,GACtC9O,EAAKiP,oBAAoB,cAAenB,GACxC9N,EAAK+O,aAAa,YAAa,YAtIlC,+BA0IC,SAAyB7B,EAAkBlN,GAAgC,WACpEkP,EAAkB,SAACxI,GAAD,OAAkB,EAAKwI,gBAAgBxI,EAAGwG,IAC5DiC,EAAiB,SAACzI,GAAD,OAAkB,EAAKyI,eAAezI,EAAGwG,IAC1DkC,EAAa,SAAC1I,GAAD,OAAkB,EAAK0I,WAAW1I,EAAGwG,IAMxD,OAJAlN,EAAKgP,iBAAiB,YAAaE,GACnClP,EAAKgP,iBAAiB,WAAYG,GAClCnP,EAAKgP,iBAAiB,OAAQI,GAEvB,WACNpP,EAAKiP,oBAAoB,YAAaC,GACtClP,EAAKiP,oBAAoB,WAAYE,GACrCnP,EAAKiP,oBAAoB,OAAQG,MAtJpC,+BA0JC,SAA0BhD,GAEpBA,EAAO4C,mBAGZ5C,EAAO4C,iBACN,YACAhQ,KAAKyM,oBAENW,EAAO4C,iBAAiB,YAAahQ,KAAKwM,2BAA2B,GACrEY,EAAO4C,iBAAiB,UAAWhQ,KAAK2N,yBAAyB,GACjEP,EAAO4C,iBACN,YACAhQ,KAAKgO,oBAENZ,EAAO4C,iBACN,YACAhQ,KAAK4N,2BACL,GAEDR,EAAO4C,iBACN,YACAhQ,KAAKwO,2BACL,GAEDpB,EAAO4C,iBAAiB,WAAYhQ,KAAKuO,mBACzCnB,EAAO4C,iBACN,WACAhQ,KAAKsO,0BACL,GAEDlB,EAAO4C,iBAAiB,OAAQhQ,KAAK4O,eACrCxB,EAAO4C,iBACN,OACAhQ,KAAK0O,sBACL,MA7LH,kCAiMC,SAA6BtB,GAEvBA,EAAO6C,sBAGZ7C,EAAO6C,oBAAoB,YAAajQ,KAAKyM,oBAC7CW,EAAO6C,oBACN,YACAjQ,KAAKwM,2BACL,GAEDY,EAAO6C,oBAAoB,UAAWjQ,KAAK2N,yBAAyB,GACpEP,EAAO6C,oBACN,YACAjQ,KAAKgO,oBAENZ,EAAO6C,oBACN,YACAjQ,KAAK4N,2BACL,GAEDR,EAAO6C,oBACN,YACAjQ,KAAKwO,2BACL,GAEDpB,EAAO6C,oBACN,WACAjQ,KAAKuO,mBAENnB,EAAO6C,oBACN,WACAjQ,KAAKsO,0BACL,GAEDlB,EAAO6C,oBAAoB,OAAQjQ,KAAK4O,eACxCxB,EAAO6C,oBACN,OACAjQ,KAAK0O,sBACL,MAxOH,yCA4OC,WACC,IAAMnD,EAAWvL,KAAKwC,QAAQE,cACxB+H,EAAoBzK,KAAKyK,kBAAkB1I,IAAIwJ,GAErD,OAAO8E,EAAAA,CACNjC,WAAYpO,KAAKgL,cAAgB,OAAS,QACtCP,GAAqB,MAlP5B,kCAsPC,WACC,OAAIzK,KAAK0L,uBAED,OAGD1L,KAAKsQ,8BAA8BlC,aA5P5C,gDA+PC,WACC,IAAM7C,EAAWvL,KAAKwC,QAAQE,cAG9B,OAAO2N,EAAAA,CACNvH,QAAS,GACTC,QAAS,GACTsE,sBAAsB,GALUrN,KAAKuK,yBAAyBxI,IAAIwJ,IAMlC,MAvQnC,kCAgRC,WACC,IAAMgF,EAAWvQ,KAAKwC,QAAQgO,cAC9B,OAAOhP,OAAOC,KAAK8B,GAAae,MAC/B,SAAC1D,GAAD,OAAiB2C,EAAqB3C,KAAS2P,OAnRlD,iCAuRC,SAA4BE,EAAcvO,GACzClC,KAAKiM,6BAELjM,KAAK6K,oBLnTA,SACN4F,EACAvO,GAEA,IAAMZ,EAASgC,EAAkBmN,GACjC,IAAKnP,EACJ,MAAM,IAAIoO,MAAJ,sBAAyBe,EAAzB,0BAEP,IAAM7Q,EAAS,IAAIyB,EAAiBC,GAEpC,OADA1B,EAAOiO,iBAAiB3L,GACjBtC,EKySqB8Q,CAAuBD,EAAMvO,GACxDlC,KAAK8K,oBAAsB9K,KAAK6L,SAAS8E,UACxCF,EACAzQ,KAAK6K,qBAEN7K,KAAK2L,QAAQgB,UAAU,CAAC3M,KAAK8K,wBA/R/B,sCAqUC,SAAiC9J,GAAsB,WACtDhB,KAAKiM,6BACLjM,KAAK+K,sBAAwB/J,EAoB7BhB,KAAKiL,sBAAwBsC,YAAW,W,IAChCvD,EAAP,OAAuB,QAAhB,IAAKC,mBAAW,IAAhB,WAAkB+F,iBACxB,YACA,EAAKhE,kCACL,KAlByB,OA7U7B,wCAoWC,WACC,GAAIhM,KAAK+K,sBAAuB,C,IAI9Bf,EADD,GAFAhK,KAAK+K,sBAAwB,KAEzB/K,KAAKiK,YACG,QAAX,EAAAjK,KAAK+E,cAAM,IAAX,KAAa6L,aAAa5Q,KAAKiL,4BAAyBuE,GACxDxP,KAAKiK,YAAYgG,oBAChB,YACAjQ,KAAKgM,kCACL,GAKF,OADAhM,KAAKiL,sBAAwB,MACtB,EAGR,OAAO,IArXT,6BAwZC,SAAuBvD,EAAc6D,GAChC7D,EAAEgF,mBAID1M,KAAK0K,qBACT1K,KAAK0K,mBAAqB,IAE3B1K,KAAK0K,mBAAmBmG,QAAQtF,MAhalC,6BA8iBC,SAAuBuF,EAAe5C,GACrClO,KAAK4K,mBAAmBiG,QAAQ3C,KA/iBlC,4BA2lBC,SAAsB4C,EAAe5C,GACL,OAA3BlO,KAAKmL,oBACRnL,KAAKmL,kBAAoB,IAE1BnL,KAAKmL,kBAAkB0F,QAAQ3C,KA/lBjC,wBA4qBC,SAAkB4C,EAAe5C,GAChClO,KAAK2K,cAAckG,QAAQ3C,OA7qB7B,KC1BO,SAAS6C,IAOf,OANK7G,KACJA,EAAa,IAAI8G,OACNC,IACV,8EAGK/G,ECDD,IAAMgH,EAA+B,SAC3C9G,EACA+G,EACAtH,GAEA,OAAO,IAAIM,EAAiBC,EAAS+G,EAAStH","sources":["../node_modules/react-dnd-html5-backend/src/utils/js_utils.ts","../node_modules/react-dnd-html5-backend/src/EnterLeaveCounter.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/NativeDragSource.ts","../node_modules/react-dnd-html5-backend/src/NativeTypes.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/getDataFromDataTransfer.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/nativeTypesConfig.ts","../node_modules/react-dnd-html5-backend/src/NativeDragSources/index.ts","../node_modules/react-dnd-html5-backend/src/BrowserDetector.ts","../node_modules/react-dnd-html5-backend/src/MonotonicInterpolant.ts","../node_modules/react-dnd-html5-backend/src/OffsetUtils.ts","../node_modules/react-dnd-html5-backend/src/OptionsReader.ts","../node_modules/react-dnd-html5-backend/src/HTML5BackendImpl.ts","../node_modules/react-dnd-html5-backend/src/getEmptyImage.ts","../node_modules/react-dnd-html5-backend/src/index.ts"],"sourcesContent":["// cheap lodash replacements\n\nexport function memoize<T>(fn: () => T): () => T {\n\tlet result: T | null = null\n\tconst memoized = () => {\n\t\tif (result == null) {\n\t\t\tresult = fn()\n\t\t}\n\t\treturn result\n\t}\n\treturn memoized\n}\n\n/**\n * drop-in replacement for _.without\n */\nexport function without<T>(items: T[], item: T) {\n\treturn items.filter((i) => i !== item)\n}\n\nexport function union<T extends string | number>(itemsA: T[], itemsB: T[]) {\n\tconst set = new Set<T>()\n\tconst insertItem = (item: T) => set.add(item)\n\titemsA.forEach(insertItem)\n\titemsB.forEach(insertItem)\n\n\tconst result: T[] = []\n\tset.forEach((key) => result.push(key))\n\treturn result\n}\n","import { union, without } from './utils/js_utils.js'\n\ntype NodePredicate = (node: Node | null | undefined) => boolean\n\nexport class EnterLeaveCounter {\n\tprivate entered: any[] = []\n\tprivate isNodeInDocument: NodePredicate\n\n\tpublic constructor(isNodeInDocument: NodePredicate) {\n\t\tthis.isNodeInDocument = isNodeInDocument\n\t}\n\n\tpublic enter(enteringNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tconst isNodeEntered = (node: Node): boolean =>\n\t\t\tthis.isNodeInDocument(node) &&\n\t\t\t(!node.contains || node.contains(enteringNode as Node))\n\n\t\tthis.entered = union(this.entered.filter(isNodeEntered), [enteringNode])\n\n\t\treturn previousLength === 0 && this.entered.length > 0\n\t}\n\n\tpublic leave(leavingNode: EventTarget | null): boolean {\n\t\tconst previousLength = this.entered.length\n\n\t\tthis.entered = without(\n\t\t\tthis.entered.filter(this.isNodeInDocument),\n\t\t\tleavingNode,\n\t\t)\n\n\t\treturn previousLength > 0 && this.entered.length === 0\n\t}\n\n\tpublic reset(): void {\n\t\tthis.entered = []\n\t}\n}\n","import type { DragDropMonitor } from 'dnd-core'\n\nimport type { NativeItemConfig } from './nativeTypesConfig.js'\n\nexport class NativeDragSource {\n\tpublic item: any\n\tprivate config: NativeItemConfig\n\n\tpublic constructor(config: NativeItemConfig) {\n\t\tthis.config = config\n\t\tthis.item = {}\n\t\tthis.initializeExposedProperties()\n\t}\n\n\tprivate initializeExposedProperties() {\n\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\tObject.defineProperty(this.item, property, {\n\t\t\t\tconfigurable: true, // This is needed to allow redefining it later\n\t\t\t\tenumerable: true,\n\t\t\t\tget() {\n\t\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`Browser doesn't allow reading \"${property}\" until the drop event.`,\n\t\t\t\t\t)\n\t\t\t\t\treturn null\n\t\t\t\t},\n\t\t\t})\n\t\t})\n\t}\n\n\tpublic loadDataTransfer(dataTransfer: DataTransfer | null | undefined): void {\n\t\tif (dataTransfer) {\n\t\t\tconst newProperties: PropertyDescriptorMap = {}\n\t\t\tObject.keys(this.config.exposeProperties).forEach((property) => {\n\t\t\t\tconst propertyFn = this.config.exposeProperties[property]\n\t\t\t\tif (propertyFn != null) {\n\t\t\t\t\tnewProperties[property] = {\n\t\t\t\t\t\tvalue: propertyFn(dataTransfer, this.config.matchesTypes),\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tenumerable: true,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tObject.defineProperties(this.item, newProperties)\n\t\t}\n\t}\n\n\tpublic canDrag(): boolean {\n\t\treturn true\n\t}\n\n\tpublic beginDrag(): any {\n\t\treturn this.item\n\t}\n\n\tpublic isDragging(monitor: DragDropMonitor, handle: string): boolean {\n\t\treturn handle === monitor.getSourceId()\n\t}\n\n\tpublic endDrag(): void {\n\t\t// empty\n\t}\n}\n","export const FILE = '__NATIVE_FILE__'\nexport const URL = '__NATIVE_URL__'\nexport const TEXT = '__NATIVE_TEXT__'\nexport const HTML = '__NATIVE_HTML__'\n","export function getDataFromDataTransfer(\n\tdataTransfer: DataTransfer,\n\ttypesToTry: string[],\n\tdefaultValue: string,\n): string {\n\tconst result = typesToTry.reduce(\n\t\t(resultSoFar, typeToTry) => resultSoFar || dataTransfer.getData(typeToTry),\n\t\t'',\n\t)\n\n\treturn result != null ? result : defaultValue\n}\n","import * as NativeTypes from '../NativeTypes.js'\nimport { getDataFromDataTransfer } from './getDataFromDataTransfer.js'\n\nexport interface NativeItemConfigExposePropreties {\n\t[property: string]: (\n\t\tdataTransfer: DataTransfer,\n\t\tmatchesTypes: string[],\n\t) => any\n}\n\nexport interface NativeItemConfig {\n\texposeProperties: NativeItemConfigExposePropreties\n\tmatchesTypes: string[]\n}\n\nexport const nativeTypesConfig: {\n\t[key: string]: NativeItemConfig\n} = {\n\t[NativeTypes.FILE]: {\n\t\texposeProperties: {\n\t\t\tfiles: (dataTransfer: DataTransfer): File[] =>\n\t\t\t\tArray.prototype.slice.call(dataTransfer.files),\n\t\t\titems: (dataTransfer: DataTransfer): DataTransferItemList =>\n\t\t\t\tdataTransfer.items,\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Files'],\n\t},\n\t[NativeTypes.HTML]: {\n\t\texposeProperties: {\n\t\t\thtml: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Html', 'text/html'],\n\t},\n\t[NativeTypes.URL]: {\n\t\texposeProperties: {\n\t\t\turls: (dataTransfer: DataTransfer, matchesTypes: string[]): string[] =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, '').split('\\n'),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Url', 'text/uri-list'],\n\t},\n\t[NativeTypes.TEXT]: {\n\t\texposeProperties: {\n\t\t\ttext: (dataTransfer: DataTransfer, matchesTypes: string[]): string =>\n\t\t\t\tgetDataFromDataTransfer(dataTransfer, matchesTypes, ''),\n\t\t\tdataTransfer: (dataTransfer: DataTransfer): DataTransfer => dataTransfer,\n\t\t},\n\t\tmatchesTypes: ['Text', 'text/plain'],\n\t},\n}\n","import { NativeDragSource } from './NativeDragSource.js'\nimport { nativeTypesConfig } from './nativeTypesConfig.js'\n\nexport function createNativeDragSource(\n\ttype: string,\n\tdataTransfer?: DataTransfer,\n): NativeDragSource {\n\tconst config = nativeTypesConfig[type]\n\tif (!config) {\n\t\tthrow new Error(`native type ${type} has no configuration`)\n\t}\n\tconst result = new NativeDragSource(config)\n\tresult.loadDataTransfer(dataTransfer)\n\treturn result\n}\n\nexport function matchNativeItemType(\n\tdataTransfer: DataTransfer | null,\n): string | null {\n\tif (!dataTransfer) {\n\t\treturn null\n\t}\n\n\tconst dataTransferTypes = Array.prototype.slice.call(dataTransfer.types || [])\n\treturn (\n\t\tObject.keys(nativeTypesConfig).filter((nativeItemType) => {\n\t\t\tconst typeConfig = nativeTypesConfig[nativeItemType]\n\t\t\tif (!typeConfig?.matchesTypes) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t\treturn typeConfig.matchesTypes.some(\n\t\t\t\t(t) => dataTransferTypes.indexOf(t) > -1,\n\t\t\t)\n\t\t})[0] || null\n\t)\n}\n","import { memoize } from './utils/js_utils.js'\n\ndeclare global {\n\tinterface Window extends HTMLElement {\n\t\tsafari: any\n\t}\n}\n\nexport type Predicate = () => boolean\nexport const isFirefox: Predicate = memoize(() =>\n\t/firefox/i.test(navigator.userAgent),\n)\nexport const isSafari: Predicate = memoize(() => Boolean(window.safari))\n","export class MonotonicInterpolant {\n\tprivate xs: any\n\tprivate ys: any\n\tprivate c1s: any\n\tprivate c2s: any\n\tprivate c3s: any\n\n\tpublic constructor(xs: number[], ys: number[]) {\n\t\tconst { length } = xs\n\n\t\t// Rearrange xs and ys so that xs is sorted\n\t\tconst indexes = []\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tindexes.push(i)\n\t\t}\n\t\tindexes.sort((a, b) => ((xs[a] as number) < (xs[b] as number) ? -1 : 1))\n\n\t\t// Get consecutive differences and slopes\n\t\tconst dys = []\n\t\tconst dxs = []\n\t\tconst ms = []\n\t\tlet dx\n\t\tlet dy\n\t\tfor (let i = 0; i < length - 1; i++) {\n\t\t\tdx = (xs[i + 1] as number) - (xs[i] as number)\n\t\t\tdy = (ys[i + 1] as number) - (ys[i] as number)\n\t\t\tdxs.push(dx)\n\t\t\tdys.push(dy)\n\t\t\tms.push(dy / dx)\n\t\t}\n\n\t\t// Get degree-1 coefficients\n\t\tconst c1s = [ms[0]]\n\t\tfor (let i = 0; i < dxs.length - 1; i++) {\n\t\t\tconst m2 = ms[i] as number\n\t\t\tconst mNext = ms[i + 1] as number\n\t\t\tif (m2 * mNext <= 0) {\n\t\t\t\tc1s.push(0)\n\t\t\t} else {\n\t\t\t\tdx = dxs[i] as number\n\t\t\t\tconst dxNext = dxs[i + 1] as number\n\t\t\t\tconst common = dx + dxNext\n\t\t\t\tc1s.push(\n\t\t\t\t\t(3 * common) / ((common + dxNext) / m2 + (common + dx) / mNext),\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\tc1s.push(ms[ms.length - 1])\n\n\t\t// Get degree-2 and degree-3 coefficients\n\t\tconst c2s = []\n\t\tconst c3s = []\n\t\tlet m\n\t\tfor (let i = 0; i < c1s.length - 1; i++) {\n\t\t\tm = ms[i] as number\n\t\t\tconst c1 = c1s[i] as number\n\t\t\tconst invDx = 1 / (dxs[i] as number)\n\t\t\tconst common = c1 + (c1s[i + 1] as number) - m - m\n\t\t\tc2s.push((m - c1 - common) * invDx)\n\t\t\tc3s.push(common * invDx * invDx)\n\t\t}\n\n\t\tthis.xs = xs\n\t\tthis.ys = ys\n\t\tthis.c1s = c1s\n\t\tthis.c2s = c2s\n\t\tthis.c3s = c3s\n\t}\n\n\tpublic interpolate(x: number): number {\n\t\tconst { xs, ys, c1s, c2s, c3s } = this\n\n\t\t// The rightmost point in the dataset should give an exact result\n\t\tlet i = xs.length - 1\n\t\tif (x === xs[i]) {\n\t\t\treturn ys[i]\n\t\t}\n\n\t\t// Search for the interval x is in, returning the corresponding y if x is one of the original xs\n\t\tlet low = 0\n\t\tlet high = c3s.length - 1\n\t\tlet mid\n\t\twhile (low <= high) {\n\t\t\tmid = Math.floor(0.5 * (low + high))\n\t\t\tconst xHere = xs[mid]\n\t\t\tif (xHere < x) {\n\t\t\t\tlow = mid + 1\n\t\t\t} else if (xHere > x) {\n\t\t\t\thigh = mid - 1\n\t\t\t} else {\n\t\t\t\treturn ys[mid]\n\t\t\t}\n\t\t}\n\t\ti = Math.max(0, high)\n\n\t\t// Interpolate\n\t\tconst diff = x - xs[i]\n\t\tconst diffSq = diff * diff\n\t\treturn ys[i] + c1s[i] * diff + c2s[i] * diffSq + c3s[i] * diff * diffSq\n\t}\n}\n","import type { XYCoord } from 'dnd-core'\n\nimport { isFirefox, isSafari } from './BrowserDetector.js'\nimport { MonotonicInterpolant } from './MonotonicInterpolant.js'\n\nconst ELEMENT_NODE = 1\n\nexport function getNodeClientOffset(node: Node): XYCoord | null {\n\tconst el = node.nodeType === ELEMENT_NODE ? node : node.parentElement\n\n\tif (!el) {\n\t\treturn null\n\t}\n\n\tconst { top, left } = (el as HTMLElement).getBoundingClientRect()\n\treturn { x: left, y: top }\n}\n\nexport function getEventClientOffset(e: MouseEvent): XYCoord {\n\treturn {\n\t\tx: e.clientX,\n\t\ty: e.clientY,\n\t}\n}\n\nfunction isImageNode(node: any) {\n\treturn (\n\t\tnode.nodeName === 'IMG' &&\n\t\t(isFirefox() || !document.documentElement?.contains(node))\n\t)\n}\n\nfunction getDragPreviewSize(\n\tisImage: boolean,\n\tdragPreview: any,\n\tsourceWidth: number,\n\tsourceHeight: number,\n) {\n\tlet dragPreviewWidth = isImage ? dragPreview.width : sourceWidth\n\tlet dragPreviewHeight = isImage ? dragPreview.height : sourceHeight\n\n\t// Work around @2x coordinate discrepancies in browsers\n\tif (isSafari() && isImage) {\n\t\tdragPreviewHeight /= window.devicePixelRatio\n\t\tdragPreviewWidth /= window.devicePixelRatio\n\t}\n\treturn { dragPreviewWidth, dragPreviewHeight }\n}\n\nexport function getDragPreviewOffset(\n\tsourceNode: HTMLElement,\n\tdragPreview: HTMLElement,\n\tclientOffset: XYCoord,\n\tanchorPoint: { anchorX: number; anchorY: number },\n\toffsetPoint: { offsetX: number; offsetY: number },\n): XYCoord {\n\t// The browsers will use the image intrinsic size under different conditions.\n\t// Firefox only cares if it's an image, but WebKit also wants it to be detached.\n\tconst isImage = isImageNode(dragPreview)\n\tconst dragPreviewNode = isImage ? sourceNode : dragPreview\n\tconst dragPreviewNodeOffsetFromClient = getNodeClientOffset(\n\t\tdragPreviewNode,\n\t) as XYCoord\n\tconst offsetFromDragPreview = {\n\t\tx: clientOffset.x - dragPreviewNodeOffsetFromClient.x,\n\t\ty: clientOffset.y - dragPreviewNodeOffsetFromClient.y,\n\t}\n\tconst { offsetWidth: sourceWidth, offsetHeight: sourceHeight } = sourceNode\n\tconst { anchorX, anchorY } = anchorPoint\n\tconst { dragPreviewWidth, dragPreviewHeight } = getDragPreviewSize(\n\t\tisImage,\n\t\tdragPreview,\n\t\tsourceWidth,\n\t\tsourceHeight,\n\t)\n\n\tconst calculateYOffset = () => {\n\t\tconst interpolantY = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the top\n\t\t\t\toffsetFromDragPreview.y,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.y / sourceHeight) * dragPreviewHeight,\n\t\t\t\t// Dock to the bottom\n\t\t\t\toffsetFromDragPreview.y + dragPreviewHeight - sourceHeight,\n\t\t\t],\n\t\t)\n\t\tlet y = interpolantY.interpolate(anchorY)\n\t\t// Work around Safari 8 positioning bug\n\t\tif (isSafari() && isImage) {\n\t\t\t// We'll have to wait for @3x to see if this is entirely correct\n\t\t\ty += (window.devicePixelRatio - 1) * dragPreviewHeight\n\t\t}\n\t\treturn y\n\t}\n\n\tconst calculateXOffset = () => {\n\t\t// Interpolate coordinates depending on anchor point\n\t\t// If you know a simpler way to do this, let me know\n\t\tconst interpolantX = new MonotonicInterpolant(\n\t\t\t[0, 0.5, 1],\n\t\t\t[\n\t\t\t\t// Dock to the left\n\t\t\t\toffsetFromDragPreview.x,\n\t\t\t\t// Align at the center\n\t\t\t\t(offsetFromDragPreview.x / sourceWidth) * dragPreviewWidth,\n\t\t\t\t// Dock to the right\n\t\t\t\toffsetFromDragPreview.x + dragPreviewWidth - sourceWidth,\n\t\t\t],\n\t\t)\n\t\treturn interpolantX.interpolate(anchorX)\n\t}\n\n\t// Force offsets if specified in the options.\n\tconst { offsetX, offsetY } = offsetPoint\n\tconst isManualOffsetX = offsetX === 0 || offsetX\n\tconst isManualOffsetY = offsetY === 0 || offsetY\n\treturn {\n\t\tx: isManualOffsetX ? offsetX : calculateXOffset(),\n\t\ty: isManualOffsetY ? offsetY : calculateYOffset(),\n\t}\n}\n","import type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport class OptionsReader {\n\tpublic ownerDocument: Document | null = null\n\tprivate globalContext: HTML5BackendContext\n\tprivate optionsArgs: HTML5BackendOptions | undefined\n\n\tpublic constructor(\n\t\tglobalContext: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.globalContext = globalContext\n\t\tthis.optionsArgs = options\n\t}\n\n\tpublic get window(): Window | undefined {\n\t\tif (this.globalContext) {\n\t\t\treturn this.globalContext\n\t\t} else if (typeof window !== 'undefined') {\n\t\t\treturn window\n\t\t}\n\t\treturn undefined\n\t}\n\n\tpublic get document(): Document | undefined {\n\t\tif (this.globalContext?.document) {\n\t\t\treturn this.globalContext.document\n\t\t} else if (this.window) {\n\t\t\treturn this.window.document\n\t\t} else {\n\t\t\treturn undefined\n\t\t}\n\t}\n\n\tpublic get rootElement(): Node | undefined {\n\t\treturn this.optionsArgs?.rootElement || this.window\n\t}\n}\n","import type {\n\tBackend,\n\tDragDropActions,\n\tDragDropManager,\n\tDragDropMonitor,\n\tHandlerRegistry,\n\tIdentifier,\n\tUnsubscribe,\n\tXYCoord,\n} from 'dnd-core'\n\nimport { EnterLeaveCounter } from './EnterLeaveCounter.js'\nimport {\n\tcreateNativeDragSource,\n\tmatchNativeItemType,\n} from './NativeDragSources/index.js'\nimport type { NativeDragSource } from './NativeDragSources/NativeDragSource.js'\nimport * as NativeTypes from './NativeTypes.js'\nimport {\n\tgetDragPreviewOffset,\n\tgetEventClientOffset,\n\tgetNodeClientOffset,\n} from './OffsetUtils.js'\nimport { OptionsReader } from './OptionsReader.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\ntype RootNode = Node & { __isReactDndBackendSetUp: boolean | undefined }\n\nexport class HTML5BackendImpl implements Backend {\n\tprivate options: OptionsReader\n\n\t// React-Dnd Components\n\tprivate actions: DragDropActions\n\tprivate monitor: DragDropMonitor\n\tprivate registry: HandlerRegistry\n\n\t// Internal State\n\tprivate enterLeaveCounter: EnterLeaveCounter\n\n\tprivate sourcePreviewNodes: Map<string, Element> = new Map()\n\tprivate sourcePreviewNodeOptions: Map<string, any> = new Map()\n\tprivate sourceNodes: Map<string, Element> = new Map()\n\tprivate sourceNodeOptions: Map<string, any> = new Map()\n\n\tprivate dragStartSourceIds: string[] | null = null\n\tprivate dropTargetIds: string[] = []\n\tprivate dragEnterTargetIds: string[] = []\n\tprivate currentNativeSource: NativeDragSource | null = null\n\tprivate currentNativeHandle: Identifier | null = null\n\tprivate currentDragSourceNode: Element | null = null\n\tprivate altKeyPressed = false\n\tprivate mouseMoveTimeoutTimer: number | null = null\n\tprivate asyncEndDragFrameId: number | null = null\n\tprivate dragOverTargetIds: string[] | null = null\n\n\tprivate lastClientOffset: XYCoord | null = null\n\tprivate hoverRafId: number | null = null\n\n\tpublic constructor(\n\t\tmanager: DragDropManager,\n\t\tglobalContext?: HTML5BackendContext,\n\t\toptions?: HTML5BackendOptions,\n\t) {\n\t\tthis.options = new OptionsReader(globalContext, options)\n\t\tthis.actions = manager.getActions()\n\t\tthis.monitor = manager.getMonitor()\n\t\tthis.registry = manager.getRegistry()\n\t\tthis.enterLeaveCounter = new EnterLeaveCounter(this.isNodeInDocument)\n\t}\n\n\t/**\n\t * Generate profiling statistics for the HTML5Backend.\n\t */\n\tpublic profile(): Record<string, number> {\n\t\treturn {\n\t\t\tsourcePreviewNodes: this.sourcePreviewNodes.size,\n\t\t\tsourcePreviewNodeOptions: this.sourcePreviewNodeOptions.size,\n\t\t\tsourceNodeOptions: this.sourceNodeOptions.size,\n\t\t\tsourceNodes: this.sourceNodes.size,\n\t\t\tdragStartSourceIds: this.dragStartSourceIds?.length || 0,\n\t\t\tdropTargetIds: this.dropTargetIds.length,\n\t\t\tdragEnterTargetIds: this.dragEnterTargetIds.length,\n\t\t\tdragOverTargetIds: this.dragOverTargetIds?.length || 0,\n\t\t}\n\t}\n\n\t// public for test\n\tpublic get window(): Window | undefined {\n\t\treturn this.options.window\n\t}\n\tpublic get document(): Document | undefined {\n\t\treturn this.options.document\n\t}\n\t/**\n\t * Get the root element to use for event subscriptions\n\t */\n\tprivate get rootElement(): Node | undefined {\n\t\treturn this.options.rootElement as Node\n\t}\n\n\tpublic setup(): void {\n\t\tconst root = this.rootElement as RootNode | undefined\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\tif (root.__isReactDndBackendSetUp) {\n\t\t\tthrow new Error('Cannot have two HTML5 backends at the same time.')\n\t\t}\n\t\troot.__isReactDndBackendSetUp = true\n\t\tthis.addEventListeners(root)\n\t}\n\n\tpublic teardown(): void {\n\t\tconst root = this.rootElement as RootNode\n\t\tif (root === undefined) {\n\t\t\treturn\n\t\t}\n\n\t\troot.__isReactDndBackendSetUp = false\n\t\tthis.removeEventListeners(this.rootElement as Element)\n\t\tthis.clearCurrentDragSourceNode()\n\t\tif (this.asyncEndDragFrameId) {\n\t\t\tthis.window?.cancelAnimationFrame(this.asyncEndDragFrameId)\n\t\t}\n\t}\n\n\tpublic connectDragPreview(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourcePreviewNodeOptions.set(sourceId, options)\n\t\tthis.sourcePreviewNodes.set(sourceId, node)\n\n\t\treturn (): void => {\n\t\t\tthis.sourcePreviewNodes.delete(sourceId)\n\t\t\tthis.sourcePreviewNodeOptions.delete(sourceId)\n\t\t}\n\t}\n\n\tpublic connectDragSource(\n\t\tsourceId: string,\n\t\tnode: Element,\n\t\toptions: any,\n\t): Unsubscribe {\n\t\tthis.sourceNodes.set(sourceId, node)\n\t\tthis.sourceNodeOptions.set(sourceId, options)\n\n\t\tconst handleDragStart = (e: any) => this.handleDragStart(e, sourceId)\n\t\tconst handleSelectStart = (e: any) => this.handleSelectStart(e)\n\n\t\tnode.setAttribute('draggable', 'true')\n\t\tnode.addEventListener('dragstart', handleDragStart)\n\t\tnode.addEventListener('selectstart', handleSelectStart)\n\n\t\treturn (): void => {\n\t\t\tthis.sourceNodes.delete(sourceId)\n\t\t\tthis.sourceNodeOptions.delete(sourceId)\n\n\t\t\tnode.removeEventListener('dragstart', handleDragStart)\n\t\t\tnode.removeEventListener('selectstart', handleSelectStart)\n\t\t\tnode.setAttribute('draggable', 'false')\n\t\t}\n\t}\n\n\tpublic connectDropTarget(targetId: string, node: HTMLElement): Unsubscribe {\n\t\tconst handleDragEnter = (e: DragEvent) => this.handleDragEnter(e, targetId)\n\t\tconst handleDragOver = (e: DragEvent) => this.handleDragOver(e, targetId)\n\t\tconst handleDrop = (e: DragEvent) => this.handleDrop(e, targetId)\n\n\t\tnode.addEventListener('dragenter', handleDragEnter)\n\t\tnode.addEventListener('dragover', handleDragOver)\n\t\tnode.addEventListener('drop', handleDrop)\n\n\t\treturn (): void => {\n\t\t\tnode.removeEventListener('dragenter', handleDragEnter)\n\t\t\tnode.removeEventListener('dragover', handleDragOver)\n\t\t\tnode.removeEventListener('drop', handleDrop)\n\t\t}\n\t}\n\n\tprivate addEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.addEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.addEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStart as EventListener,\n\t\t)\n\t\ttarget.addEventListener('dragstart', this.handleTopDragStartCapture, true)\n\t\ttarget.addEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('dragover', this.handleTopDragOver as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.addEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.addEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate removeEventListeners(target: Node) {\n\t\t// SSR Fix (https://github.com/react-dnd/react-dnd/pull/813\n\t\tif (!target.removeEventListener) {\n\t\t\treturn\n\t\t}\n\t\ttarget.removeEventListener('dragstart', this.handleTopDragStart as any)\n\t\ttarget.removeEventListener(\n\t\t\t'dragstart',\n\t\t\tthis.handleTopDragStartCapture,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('dragend', this.handleTopDragEndCapture, true)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnter as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragenter',\n\t\t\tthis.handleTopDragEnterCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragleave',\n\t\t\tthis.handleTopDragLeaveCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOver as EventListener,\n\t\t)\n\t\ttarget.removeEventListener(\n\t\t\t'dragover',\n\t\t\tthis.handleTopDragOverCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t\ttarget.removeEventListener('drop', this.handleTopDrop as EventListener)\n\t\ttarget.removeEventListener(\n\t\t\t'drop',\n\t\t\tthis.handleTopDropCapture as EventListener,\n\t\t\ttrue,\n\t\t)\n\t}\n\n\tprivate getCurrentSourceNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourceNodeOptions = this.sourceNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tdropEffect: this.altKeyPressed ? 'copy' : 'move',\n\t\t\t...(sourceNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getCurrentDropEffect() {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\t// It makes more sense to default to 'copy' for native resources\n\t\t\treturn 'copy'\n\t\t}\n\n\t\treturn this.getCurrentSourceNodeOptions().dropEffect\n\t}\n\n\tprivate getCurrentSourcePreviewNodeOptions() {\n\t\tconst sourceId = this.monitor.getSourceId() as string\n\t\tconst sourcePreviewNodeOptions = this.sourcePreviewNodeOptions.get(sourceId)\n\n\t\treturn {\n\t\t\tanchorX: 0.5,\n\t\t\tanchorY: 0.5,\n\t\t\tcaptureDraggingState: false,\n\t\t\t...(sourcePreviewNodeOptions || {}),\n\t\t}\n\t}\n\n\tprivate getSourceClientOffset = (sourceId: string): XYCoord | null => {\n\t\tconst source = this.sourceNodes.get(sourceId)\n\t\treturn (source && getNodeClientOffset(source as HTMLElement)) || null\n\t}\n\n\tprivate isDraggingNativeItem() {\n\t\tconst itemType = this.monitor.getItemType()\n\t\treturn Object.keys(NativeTypes).some(\n\t\t\t(key: string) => (NativeTypes as any)[key] === itemType,\n\t\t)\n\t}\n\n\tprivate beginDragNativeItem(type: string, dataTransfer?: DataTransfer) {\n\t\tthis.clearCurrentDragSourceNode()\n\n\t\tthis.currentNativeSource = createNativeDragSource(type, dataTransfer)\n\t\tthis.currentNativeHandle = this.registry.addSource(\n\t\t\ttype,\n\t\t\tthis.currentNativeSource,\n\t\t)\n\t\tthis.actions.beginDrag([this.currentNativeHandle])\n\t}\n\n\tprivate endDragNativeItem = (): void => {\n\t\tif (!this.isDraggingNativeItem()) {\n\t\t\treturn\n\t\t}\n\n\t\tthis.actions.endDrag()\n\t\tif (this.currentNativeHandle) {\n\t\t\tthis.registry.removeSource(this.currentNativeHandle)\n\t\t}\n\t\tthis.currentNativeHandle = null\n\t\tthis.currentNativeSource = null\n\t}\n\n\tprivate isNodeInDocument = (node: Node | null | undefined): boolean => {\n\t\t// Check the node either in the main document or in the current context\n\t\treturn Boolean(\n\t\t\tnode &&\n\t\t\t\tthis.document &&\n\t\t\t\tthis.document.body &&\n\t\t\t\tthis.document.body.contains(node),\n\t\t)\n\t}\n\n\tprivate endDragIfSourceWasRemovedFromDOM = (): void => {\n\t\tconst node = this.currentDragSourceNode\n\t\tif (node == null || this.isNodeInDocument(node)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tprivate setCurrentDragSourceNode(node: Element | null) {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.currentDragSourceNode = node\n\n\t\t// A timeout of > 0 is necessary to resolve Firefox issue referenced\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\tconst MOUSE_MOVE_TIMEOUT = 1000\n\n\t\t// Receiving a mouse event in the middle of a dragging operation\n\t\t// means it has ended and the drag source node disappeared from DOM,\n\t\t// so the browser didn't dispatch the dragend event.\n\t\t//\n\t\t// We need to wait before we start listening for mousemove events.\n\t\t// This is needed because the drag preview needs to be drawn or else it fires an 'mousemove' event\n\t\t// immediately in some browsers.\n\t\t//\n\t\t// See:\n\t\t//   * https://github.com/react-dnd/react-dnd/pull/928\n\t\t//   * https://github.com/react-dnd/react-dnd/issues/869\n\t\t//\n\t\tthis.mouseMoveTimeoutTimer = setTimeout(() => {\n\t\t\treturn this.rootElement?.addEventListener(\n\t\t\t\t'mousemove',\n\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\ttrue,\n\t\t\t)\n\t\t}, MOUSE_MOVE_TIMEOUT) as any as number\n\t}\n\n\tprivate clearCurrentDragSourceNode() {\n\t\tif (this.currentDragSourceNode) {\n\t\t\tthis.currentDragSourceNode = null\n\n\t\t\tif (this.rootElement) {\n\t\t\t\tthis.window?.clearTimeout(this.mouseMoveTimeoutTimer || undefined)\n\t\t\t\tthis.rootElement.removeEventListener(\n\t\t\t\t\t'mousemove',\n\t\t\t\t\tthis.endDragIfSourceWasRemovedFromDOM,\n\t\t\t\t\ttrue,\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tthis.mouseMoveTimeoutTimer = null\n\t\t\treturn true\n\t\t}\n\n\t\treturn false\n\t}\n\n\tprivate scheduleHover = (dragOverTargetIds: string[] | null) => {\n\t\tif (\n\t\t\tthis.hoverRafId === null &&\n\t\t\ttypeof requestAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tthis.hoverRafId = requestAnimationFrame(() => {\n\t\t\t\tif (this.monitor.isDragging()) {\n\t\t\t\t\tthis.actions.hover(dragOverTargetIds || [], {\n\t\t\t\t\t\tclientOffset: this.lastClientOffset,\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tthis.hoverRafId = null\n\t\t\t})\n\t\t}\n\t}\n\n\tprivate cancelHover = () => {\n\t\tif (\n\t\t\tthis.hoverRafId !== null &&\n\t\t\ttypeof cancelAnimationFrame !== 'undefined'\n\t\t) {\n\t\t\tcancelAnimationFrame(this.hoverRafId)\n\t\t\tthis.hoverRafId = null\n\t\t}\n\t}\n\n\tpublic handleTopDragStartCapture = (): void => {\n\t\tthis.clearCurrentDragSourceNode()\n\t\tthis.dragStartSourceIds = []\n\t}\n\n\tpublic handleDragStart(e: DragEvent, sourceId: string): void {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tif (!this.dragStartSourceIds) {\n\t\t\tthis.dragStartSourceIds = []\n\t\t}\n\t\tthis.dragStartSourceIds.unshift(sourceId)\n\t}\n\n\tpublic handleTopDragStart = (e: DragEvent): void => {\n\t\tif (e.defaultPrevented) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dragStartSourceIds } = this\n\t\tthis.dragStartSourceIds = null\n\n\t\tconst clientOffset = getEventClientOffset(e)\n\n\t\t// Avoid crashing if we missed a drop event or our previous drag died\n\t\tif (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t\tthis.cancelHover()\n\t\t}\n\n\t\t// Don't publish the source just yet (see why below)\n\t\tthis.actions.beginDrag(dragStartSourceIds || [], {\n\t\t\tpublishSource: false,\n\t\t\tgetSourceClientOffset: this.getSourceClientOffset,\n\t\t\tclientOffset,\n\t\t})\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (this.monitor.isDragging()) {\n\t\t\tif (dataTransfer && typeof dataTransfer.setDragImage === 'function') {\n\t\t\t\t// Use custom drag image if user specifies it.\n\t\t\t\t// If child drag source refuses drag but parent agrees,\n\t\t\t\t// use parent's node as drag image. Neither works in IE though.\n\t\t\t\tconst sourceId: string = this.monitor.getSourceId() as string\n\t\t\t\tconst sourceNode = this.sourceNodes.get(sourceId)\n\t\t\t\tconst dragPreview = this.sourcePreviewNodes.get(sourceId) || sourceNode\n\n\t\t\t\tif (dragPreview) {\n\t\t\t\t\tconst { anchorX, anchorY, offsetX, offsetY } =\n\t\t\t\t\t\tthis.getCurrentSourcePreviewNodeOptions()\n\t\t\t\t\tconst anchorPoint = { anchorX, anchorY }\n\t\t\t\t\tconst offsetPoint = { offsetX, offsetY }\n\t\t\t\t\tconst dragPreviewOffset = getDragPreviewOffset(\n\t\t\t\t\t\tsourceNode as HTMLElement,\n\t\t\t\t\t\tdragPreview as HTMLElement,\n\t\t\t\t\t\tclientOffset,\n\t\t\t\t\t\tanchorPoint,\n\t\t\t\t\t\toffsetPoint,\n\t\t\t\t\t)\n\n\t\t\t\t\tdataTransfer.setDragImage(\n\t\t\t\t\t\tdragPreview,\n\t\t\t\t\t\tdragPreviewOffset.x,\n\t\t\t\t\t\tdragPreviewOffset.y,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\t// Firefox won't drag without setting data\n\t\t\t\tdataTransfer?.setData('application/json', {} as any)\n\t\t\t} catch (err) {\n\t\t\t\t// IE doesn't support MIME types in setData\n\t\t\t}\n\n\t\t\t// Store drag source node so we can check whether\n\t\t\t// it is removed from DOM and trigger endDrag manually.\n\t\t\tthis.setCurrentDragSourceNode(e.target as Element)\n\n\t\t\t// Now we are ready to publish the drag source.. or are we not?\n\t\t\tconst { captureDraggingState } = this.getCurrentSourcePreviewNodeOptions()\n\t\t\tif (!captureDraggingState) {\n\t\t\t\t// Usually we want to publish it in the next tick so that browser\n\t\t\t\t// is able to screenshot the current (not yet dragging) state.\n\t\t\t\t//\n\t\t\t\t// It also neatly avoids a situation where render() returns null\n\t\t\t\t// in the same tick for the source element, and browser freaks out.\n\t\t\t\tsetTimeout(() => this.actions.publishDragSource(), 0)\n\t\t\t} else {\n\t\t\t\t// In some cases the user may want to override this behavior, e.g.\n\t\t\t\t// to work around IE not supporting custom drag previews.\n\t\t\t\t//\n\t\t\t\t// When using a custom drag layer, the only way to prevent\n\t\t\t\t// the default drag preview from drawing in IE is to screenshot\n\t\t\t\t// the dragging state in which the node itself has zero opacity\n\t\t\t\t// and height. In this case, though, returning null from render()\n\t\t\t\t// will abruptly end the dragging, which is not obvious.\n\t\t\t\t//\n\t\t\t\t// This is the reason such behavior is strictly opt-in.\n\t\t\t\tthis.actions.publishDragSource()\n\t\t\t}\n\t\t} else if (nativeType) {\n\t\t\t// A native item (such as URL) dragged from inside the document\n\t\t\tthis.beginDragNativeItem(nativeType)\n\t\t} else if (\n\t\t\tdataTransfer &&\n\t\t\t!dataTransfer.types &&\n\t\t\t((e.target && !(e.target as Element).hasAttribute) ||\n\t\t\t\t!(e.target as Element).hasAttribute('draggable'))\n\t\t) {\n\t\t\t// Looks like a Safari bug: dataTransfer.types is null, but there was no draggable.\n\t\t\t// Just let it drag. It's a native type (URL or text) and will be picked up in\n\t\t\t// dragenter handler.\n\t\t\treturn\n\t\t} else {\n\t\t\t// If by this time no drag source reacted, tell browser not to drag.\n\t\t\te.preventDefault()\n\t\t}\n\t}\n\n\tpublic handleTopDragEndCapture = (): void => {\n\t\tif (this.clearCurrentDragSourceNode() && this.monitor.isDragging()) {\n\t\t\t// Firefox can dispatch this event in an infinite loop\n\t\t\t// if dragend handler does something like showing an alert.\n\t\t\t// Only proceed if we have not handled it already.\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDragEnterCapture = (e: DragEvent): void => {\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\n\t\tconst isFirstEnter = this.enterLeaveCounter.enter(e.target)\n\t\tif (!isFirstEnter || this.monitor.isDragging()) {\n\t\t\treturn\n\t\t}\n\n\t\tconst { dataTransfer } = e\n\t\tconst nativeType = matchNativeItemType(dataTransfer)\n\n\t\tif (nativeType) {\n\t\t\t// A native item (such as file or URL) dragged from outside the document\n\t\t\tthis.beginDragNativeItem(nativeType, dataTransfer as DataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragEnter(_e: DragEvent, targetId: string): void {\n\t\tthis.dragEnterTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragEnter = (e: DragEvent): void => {\n\t\tconst { dragEnterTargetIds } = this\n\t\tthis.dragEnterTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\n\t\t// If the target changes position as the result of `dragenter`, `dragover` might still\n\t\t// get dispatched despite target being no longer there. The easy solution is to check\n\t\t// whether there actually is a target before firing `hover`.\n\t\tif (dragEnterTargetIds.length > 0) {\n\t\t\tthis.actions.hover(dragEnterTargetIds, {\n\t\t\t\tclientOffset: getEventClientOffset(e),\n\t\t\t})\n\t\t}\n\n\t\tconst canDrop = dragEnterTargetIds.some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// IE requires this to fire dragover events\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragOverCapture = (e: DragEvent): void => {\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t}\n\t}\n\n\tpublic handleDragOver(_e: DragEvent, targetId: string): void {\n\t\tif (this.dragOverTargetIds === null) {\n\t\t\tthis.dragOverTargetIds = []\n\t\t}\n\t\tthis.dragOverTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDragOver = (e: DragEvent): void => {\n\t\tconst { dragOverTargetIds } = this\n\t\tthis.dragOverTargetIds = []\n\n\t\tif (!this.monitor.isDragging()) {\n\t\t\t// This is probably a native item type we don't understand.\n\t\t\t// Prevent default \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tthis.altKeyPressed = e.altKey\n\t\tthis.lastClientOffset = getEventClientOffset(e)\n\n\t\tthis.scheduleHover(dragOverTargetIds)\n\n\t\tconst canDrop = (dragOverTargetIds || []).some((targetId) =>\n\t\t\tthis.monitor.canDropOnTarget(targetId),\n\t\t)\n\n\t\tif (canDrop) {\n\t\t\t// Show user-specified drop effect.\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = this.getCurrentDropEffect()\n\t\t\t}\n\t\t} else if (this.isDraggingNativeItem()) {\n\t\t\t// Don't show a nice cursor but still prevent default\n\t\t\t// \"drop and blow away the whole document\" action.\n\t\t\te.preventDefault()\n\t\t} else {\n\t\t\te.preventDefault()\n\t\t\tif (e.dataTransfer) {\n\t\t\t\te.dataTransfer.dropEffect = 'none'\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic handleTopDragLeaveCapture = (e: DragEvent): void => {\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tconst isLastLeave = this.enterLeaveCounter.leave(e.target)\n\t\tif (!isLastLeave) {\n\t\t\treturn\n\t\t}\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tsetTimeout(() => this.endDragNativeItem(), 0)\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleTopDropCapture = (e: DragEvent): void => {\n\t\tthis.dropTargetIds = []\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\te.preventDefault()\n\t\t\tthis.currentNativeSource?.loadDataTransfer(e.dataTransfer)\n\t\t} else if (matchNativeItemType(e.dataTransfer)) {\n\t\t\t// Dragging some elements, like <a> and <img> may still behave like a native drag event,\n\t\t\t// even if the current drag event matches a user-defined type.\n\t\t\t// Stop the default behavior when we're not expecting a native item to be dropped.\n\n\t\t\te.preventDefault()\n\t\t}\n\n\t\tthis.enterLeaveCounter.reset()\n\t}\n\n\tpublic handleDrop(_e: DragEvent, targetId: string): void {\n\t\tthis.dropTargetIds.unshift(targetId)\n\t}\n\n\tpublic handleTopDrop = (e: DragEvent): void => {\n\t\tconst { dropTargetIds } = this\n\t\tthis.dropTargetIds = []\n\n\t\tthis.actions.hover(dropTargetIds, {\n\t\t\tclientOffset: getEventClientOffset(e),\n\t\t})\n\t\tthis.actions.drop({ dropEffect: this.getCurrentDropEffect() })\n\n\t\tif (this.isDraggingNativeItem()) {\n\t\t\tthis.endDragNativeItem()\n\t\t} else if (this.monitor.isDragging()) {\n\t\t\tthis.actions.endDrag()\n\t\t}\n\t\tthis.cancelHover()\n\t}\n\n\tpublic handleSelectStart = (e: DragEvent): void => {\n\t\tconst target = e.target as HTMLElement & { dragDrop: () => void }\n\n\t\t// Only IE requires us to explicitly say\n\t\t// we want drag drop operation to start\n\t\tif (typeof target.dragDrop !== 'function') {\n\t\t\treturn\n\t\t}\n\n\t\t// Inputs and textareas should be selectable\n\t\tif (\n\t\t\ttarget.tagName === 'INPUT' ||\n\t\t\ttarget.tagName === 'SELECT' ||\n\t\t\ttarget.tagName === 'TEXTAREA' ||\n\t\t\ttarget.isContentEditable\n\t\t) {\n\t\t\treturn\n\t\t}\n\n\t\t// For other targets, ask IE\n\t\t// to enable drag and drop\n\t\te.preventDefault()\n\t\ttarget.dragDrop()\n\t}\n}\n","let emptyImage: HTMLImageElement | undefined\n\nexport function getEmptyImage(): HTMLImageElement {\n\tif (!emptyImage) {\n\t\temptyImage = new Image()\n\t\temptyImage.src =\n\t\t\t'data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=='\n\t}\n\n\treturn emptyImage\n}\n","import type { BackendFactory, DragDropManager } from 'dnd-core'\n\nimport { HTML5BackendImpl } from './HTML5BackendImpl.js'\nimport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\nexport { getEmptyImage } from './getEmptyImage.js'\nexport * as NativeTypes from './NativeTypes.js'\nexport type { HTML5BackendContext, HTML5BackendOptions } from './types.js'\n\nexport const HTML5Backend: BackendFactory = function createBackend(\n\tmanager: DragDropManager,\n\tcontext?: HTML5BackendContext,\n\toptions?: HTML5BackendOptions,\n): HTML5BackendImpl {\n\treturn new HTML5BackendImpl(manager, context, options)\n}\n"],"names":["memoize","fn","result","EnterLeaveCounter","isNodeInDocument","entered","this","enteringNode","previousLength","length","itemsA","itemsB","set","Set","insertItem","item","add","forEach","key","push","union","filter","node","contains","leavingNode","items","i","NativeDragSource","config","initializeExposedProperties","Object","keys","exposeProperties","property","defineProperty","configurable","enumerable","get","console","warn","dataTransfer","newProperties","propertyFn","value","matchesTypes","defineProperties","monitor","handle","getSourceId","FILE","URL","TEXT","HTML","getDataFromDataTransfer","typesToTry","defaultValue","reduce","resultSoFar","typeToTry","getData","nativeTypesConfig","NativeTypes","files","Array","prototype","slice","call","html","urls","split","text","matchNativeItemType","dataTransferTypes","types","nativeItemType","typeConfig","some","t","indexOf","isFirefox","test","navigator","userAgent","isSafari","Boolean","window","safari","MonotonicInterpolant","xs","ys","indexes","sort","a","b","dx","dy","dys","dxs","ms","c1s","m2","mNext","dxNext","common","m","c2s","c3s","c1","invDx","x","mid","low","high","xHere","Math","floor","diff","max","diffSq","getNodeClientOffset","el","nodeType","parentElement","getBoundingClientRect","top","left","y","getEventClientOffset","e","clientX","clientY","getDragPreviewOffset","sourceNode","dragPreview","clientOffset","anchorPoint","offsetPoint","isImage","document","nodeName","documentElement","isImageNode","dragPreviewNodeOffsetFromClient","offsetFromDragPreview","sourceWidth","offsetWidth","sourceHeight","offsetHeight","anchorX","anchorY","dragPreviewWidth","width","dragPreviewHeight","height","devicePixelRatio","getDragPreviewSize","offsetX","offsetY","isManualOffsetY","interpolate","calculateYOffset","OptionsReader","globalContext","options","ownerDocument","optionsArgs","ref","rootElement","emptyImage","HTML5BackendImpl","manager","sourcePreviewNodes","Map","sourcePreviewNodeOptions","sourceNodes","sourceNodeOptions","dragStartSourceIds","dropTargetIds","dragEnterTargetIds","currentNativeSource","currentNativeHandle","currentDragSourceNode","altKeyPressed","mouseMoveTimeoutTimer","asyncEndDragFrameId","dragOverTargetIds","lastClientOffset","hoverRafId","getSourceClientOffset","sourceId","source","endDragNativeItem","isDraggingNativeItem","actions","endDrag","registry","removeSource","body","endDragIfSourceWasRemovedFromDOM","clearCurrentDragSourceNode","isDragging","cancelHover","scheduleHover","requestAnimationFrame","hover","cancelAnimationFrame","handleTopDragStartCapture","handleTopDragStart","defaultPrevented","beginDrag","publishSource","nativeType","setDragImage","getCurrentSourcePreviewNodeOptions","dragPreviewOffset","setData","err","setCurrentDragSourceNode","target","captureDraggingState","publishDragSource","setTimeout","beginDragNativeItem","hasAttribute","preventDefault","handleTopDragEndCapture","handleTopDragEnterCapture","loadDataTransfer","enterLeaveCounter","enter","handleTopDragEnter","altKey","targetId","canDropOnTarget","dropEffect","getCurrentDropEffect","handleTopDragOverCapture","handleTopDragOver","handleTopDragLeaveCapture","leave","handleTopDropCapture","reset","handleTopDrop","drop","handleSelectStart","dragDrop","tagName","isContentEditable","getActions","getMonitor","getRegistry","ref1","size","root","undefined","__isReactDndBackendSetUp","Error","addEventListeners","removeEventListeners","delete","handleDragStart","setAttribute","addEventListener","removeEventListener","handleDragEnter","handleDragOver","handleDrop","_objectSpread","getCurrentSourceNodeOptions","itemType","getItemType","type","createNativeDragSource","addSource","clearTimeout","unshift","_e","getEmptyImage","Image","src","HTML5Backend","context"],"sourceRoot":""}